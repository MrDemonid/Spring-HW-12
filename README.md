## Паттерны и их обоснование.

### Payment.
Используется паттерн `Chain of Responsibility`, позволяющий выстраивать
цепочки нужных операций.

Платежный интерфейс `PaymentContext` представлен паттерном `Strategy`, для удобного
переключения типов оплаты (кредитная карта, Pay Pal, Быстрый платеж и тд) на лету.

Это позволяет работать с оплатой через единый интерфейс, не зная деталей реализации.


### Catalog.
Использует паттерн `Factory Method`, поскольку этот паттерн обеспечивает легкое 
добавление/удаления новых категорий, без модификации другого кода.

Точнее можно сделать без модификации, если в фабрике вместо switch использовать Map<>.
Но в демонстрационном примере не вижу смысла так заморачиваться.


### Cart.
Используется паттерн `Strategy`. Позволяет легко менять стратегию работы с корзиной
для различных типов пользователей (авторизированные и анонимные).  

Легко добавляются новые стратегии, не затрагивая остальной бизнес-логики. 


### Разное.
Поскольку магазин может работать и с не авторизированными пользователями,
то для их идентификации используются куки. Веб-клиент генерирует anon_id
для каждого нового пользователя, пока он не авторизуется. Эти же
идентификационные куки передаются и в корзину, посредством встраивания
их в Feign-запросы.


Генерация приватного ключа для сервера аутентификации:
```shell
openssl genrsa -out private_key.pem 2048
```
Извлечение публичного ключа из приватного:
```shell
openssl rsa -in private_key.pem -pubout -out public_key.pem
```
По необходимости конвертируем первичный ключ из формата PKCS#1 в PKCS#8:
```shell
openssl pkcs8 -topk8 -inform PEM -outform PEM -nocrypt -in private_key.pem -out private_key_pkcs8.pem
```
